<html lang="en">
<head>
  <title>Poker Scraper</title>
  <style>
    body {
      font-family: "Helvetica Neue", helvetica, arial, serif;
      padding: 15px;
    }

    ul {
      list-style: none;
      margin: 0;
      padding: 0;
    }

    ul li {
      line-height: 1.4;
    }
  </style>

  <script defer>
    var host = location.origin.replace(/^http/, 'ws')
    var ws = new WebSocket(host);
    ws.binaryType = 'arraybuffer';
    var dec = new TextDecoder()
    window.onload = function () {
      var btnEl = document.getElementById('btn');
      var inputEl = document.getElementById('input');

      btnEl.onclick = event => {
        console.log(inputEl.value, typeof inputEl.value);
        ws.send(inputEl.value);
      }
    }

    // ws.onopen = event => {
    //   ws.send('do you hear me?')
    // };

    ws.onmessage = function (event) {
      var li = document.createElement('li');
      console.log('event', event);
      var received = dec.decode(event.data);
      console.log('received data', received);
      li.innerHTML = received;
      document.querySelector('#pings').appendChild(li);
    };
  </script>
</head>
<body>
<h1>Pings</h1>
<ul id='pings'></ul>
<label>
  <textarea id="input" name="Text1" cols="40" rows="5"></textarea>
</label>
<button id="btn">Click</button>
</body>
</html>
